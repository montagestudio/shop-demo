montageDefine("07f2c2d","writer",{dependencies:["q"],factory:function(e,t,n){function r(e,t){var n=Object.create(r.prototype);t&&e.setEncoding&&e.setEncoding(t);var o=i.defer();return e.on("error",function(e){o.reject(e),o=i.defer()}),e.on("drain",function(){o.resolve(),o=i.defer()}),n.write=function(t){return e.writeable||e.writable?("string"!=typeof t&&(t=new Buffer(t)),e.write(t)?i.resolve():o.promise):i.reject(Error("Can't write to non-writable (possibly closed) stream"))},n.flush=function(){return o.promise},n.close=function(){var t;return a&&(t=i.defer(),e.on("finish",function(){t.resolve()}),e.on("error",function(e){t.reject(e)})),e.end(),o.resolve(),t?t.promise:i()},n.destroy=function(){return e.destroy(),o.resolve(),i.resolve()},n.node=e,i(n)}var i=e("q");n.exports=r;var o=process.versions.node.split("."),a=o[0]>=0&&o[1]>=10}});