montageDefine("07f2c2d","http-apps/route",{dependencies:["q","./status"],factory:function(e,t){var n=e("q"),r=e("./status");t.Cap=function(e,t){return t=t||r.notFound,function(n,r){return""===n.pathInfo||"/"===n.pathInfo?e(n,r):t(n,r)}},t.Tap=function(e,t){return function(){var r=this,i=arguments;return n.when(t.apply(this,arguments),function(t){return t?t:e.apply(r,i)})}},t.Trap=function(e,t){return function(r){return n.when(e.apply(this,arguments),function(e){return e?(e.headers=e.headers||{},t(e,r)||e):void 0})}},t.Branch=function(e,t){return e||(e={}),t||(t=r.notFound),function(n,r){if(!/^\//.test(n.pathInfo))return t(n,r);var i=n.pathInfo.slice(1),o=i.split("/"),a=decodeURIComponent(o.shift());return Object.has(e,a)?(n.scriptName=n.scriptName+a+"/",n.pathInfo=i.slice(a.length),Object.get(e,a)(n,r)):t(n,r)}},t.FirstFound=function(e){return function(t){function r(){var a=e[i++](t,a);return o>i?n.when(a,function(e){return 404===e.status?r():e}):a}var i=0,o=e.length;return r()}}}});