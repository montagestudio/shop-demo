montageDefine("07f2c2d","http-apps/json",{dependencies:["q","./content","./status"],factory:function(e,t){var n=e("q"),r=e("./content"),i=e("./status");t.HandleJsonResponses=function(e,r,i){return function(o){return o.handleJsonResponse=t.handleJsonResponse,n.fcall(e,o).then(function(e){return void 0!==e.data?n.fcall(t.handleJsonResponse,e,r,i):e})}},t.handleJsonResponse=function(e,t,n){return e.headers["content-type"]="application/json",e.body={forEach:function(r){r(JSON.stringify(e.data,t,n))}},e},t.Json=function(e,r,i){return function(o,a){return n.when(e(o,a),function(e){return t.json(e,r,i)})}},t.json=function(e,t,i){try{var o=JSON.stringify(e,t,i)}catch(a){return n.reject(a)}return r.ok([o])},t.JsonRequest=function(e,t){return t||(t=i.badRequest),r.ContentRequest(function(n,r,i){try{var o=JSON.parse(n)}catch(a){return t(r,a)}return e(o,r,i)})}}});