function Chain(e){var t=Object.create(Chain.prototype);return t.end=e||function(e){return e},t}module.exports=Chain,Chain.prototype.use=function(e){if(!e)throw Error("App is not defined after "+this.app);var t=Array.prototype.slice.call(arguments,1),n=this;return this.end=function(r){return function i(o){if(n.end!==i&&!o)throw Error("App chain is broken after "+e);return r(e.apply(null,[o].concat(t)))}}(this.end),this.app=e,this};